<% content_for :title, 'Settings - Admin' %>

<%= render 'admin/admin/navbar' %>

<div class="container">
  <% flash.each do |name, msg| %>
    <div class="alert alert-<%= name %> alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      <%= msg %>
    </div>
  <% end %>
</div>

<div class="row">
  <div class="col-md-2">
    <div class="list-group">
      <% SiteSetting.category_listings.each do |category| %>
        <%= link_to category, admin_settings_path(category),
                    class: "list-group-item #{active_class_if_category(category)}" %>
      <% end %>
    </div>
  </div>

  <div class="col-md-10">
    <%= form_for :settings,
                 html: {role: 'form', class: 'form-horizontal'},
                 method: :put do |f| %>
      <% @settings.each do |s| %>
        <div class="form-group">
          <%= label_tag s[:setting], s[:setting], class: 'col-md-3 control-label' %>
          <div class="col-md-7">
            <%= text_field_tag s[:setting],
                               s[:value],
                               name: "settings[#{s[:setting]}]",
                               placeholder: s[:default],
                               class: 'form-control'%>
            <p><%= s[:description] %></p>
          </div>
          <div class="col-md-2">
            <% if s[:value] != s[:default] %>
              <button type="button" class="btn btn-default">
                Restore to default
              </button>
            <% end %>
          </div>
        </div>
      <% end %>
      <div class="form-group">
        <div class="col-md-offset-3 col-md-9">
          <%= f.submit class: 'btn btn-warning' %>
        </div>
      </div>
    <% end %>
  </div>
</div>
